@model IEnumerable<StudentMVC.Models.Student>

@{
    ViewBag.Title = "Index";
}

<script src="~/Scripts/jquery-3.1.1.min.js"></script>

<h2>List of students</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.StudentID }) |
            @Html.ActionLink("Details", "Details", new { id=item.StudentID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.StudentID })
        </td>
    </tr>
}

</table>


<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/noty/packaged/jquery.noty.packaged.min.js"></script>

<script>

    $(document).ready(function () {
        handleNoty('notyCreate', 'Student is successfully created')
        handleNoty('notyDelete', 'Student is successfully deleted')
        handleNoty('notyUpdate', 'Student is successfully updated')
    });

    function handleNoty(notyName, notyMsg)
    {
        if (localStorage.getItem(notyName) != null) {
            generateNoty(notyMsg);
            removeNoty(notyName)
        }
    }

    function removeNoty(notyName)
    {
        localStorage.removeItem(notyName);
    }

    

    //function generate(layout) {
    //    var n = noty({
    //        text: layout,
    //        type: 'alert',
    //        dismissQueue: true,
    //        layout: layout,
    //        theme: 'relax',
    //        maxVisible: 1
    //    });
    //}

    function generateNoty(message) {
        var n = noty({
            text: message,
            type: 'success',
            dismissQueue: true,
            layout: 'topRight',
            theme: 'relax',
            maxVisible: 5
        });
    }

</script>